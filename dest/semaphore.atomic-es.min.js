this.Atomic.module("$semaphore",["$apply","$forEach"],function(t,i,n){function s(s,e){function r(s,r){function u(s){i(this._listeners,t(n,[this._result=s]))}return this._result?void r(this._result):((this._listeners=this._listeners||[]).push(r),void(this._listeners.length>1||e(s,u.bind(this))))}function u(t){return s[t]=s[t]||r.bind({})}return function(t,i){u(JSON.stringify(t))(t,i)}}return s.bind(null,{})});